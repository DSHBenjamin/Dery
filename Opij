--// Services
local player = game.Players.LocalPlayer
local UIS = game:GetService("UserInputService")
local RS = game:GetService("RunService")

--// Create GUI
local gui = Instance.new("ScreenGui", player.PlayerGui)
gui.Name = "DashUI"
gui.ResetOnSpawn = false  -- Don't disappear on death

local frame = Instance.new("Frame", gui)
frame.Size = UDim2.new(0, 250, 0, 160)
frame.Position = UDim2.new(0.05, 0, 0.4, 0)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BackgroundTransparency = 0.1
frame.Active = true
frame.Draggable = true
Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 12)

local title = Instance.new("TextLabel", frame)
title.Text = "Dash UI"
title.Size = UDim2.new(1, 0, 0, 30)
title.BackgroundTransparency = 1
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.Font = Enum.Font.GothamBold
title.TextSize = 22

local toggle = Instance.new("TextButton", frame)
toggle.Text = "Dash: OFF"
toggle.Size = UDim2.new(0.9, 0, 0, 30)
toggle.Position = UDim2.new(0.05, 0, 0, 40)
toggle.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
toggle.TextColor3 = Color3.fromRGB(255, 255, 255)
toggle.Font = Enum.Font.GothamBold
toggle.TextSize = 20
Instance.new("UICorner", toggle).CornerRadius = UDim.new(0, 8)

local speedBox = Instance.new("TextBox", frame)
speedBox.PlaceholderText = "Speed (eg. 50)"
speedBox.Size = UDim2.new(0.9, 0, 0, 30)
speedBox.Position = UDim2.new(0.05, 0, 0, 80)
speedBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
speedBox.TextColor3 = Color3.fromRGB(255, 255, 255)
speedBox.Font = Enum.Font.Gotham
speedBox.TextSize = 18
speedBox.ClearTextOnFocus = false
Instance.new("UICorner", speedBox).CornerRadius = UDim.new(0, 8)

local info = Instance.new("TextLabel", frame)
info.Text = "Hide/Show: +/-"
info.Size = UDim2.new(1, 0, 0, 25)
info.Position = UDim2.new(0, 0, 1, -25)
info.BackgroundTransparency = 1
info.TextColor3 = Color3.fromRGB(255, 255, 255)
info.Font = Enum.Font.Gotham
info.TextSize = 14

--// Variables
local active = false
local dashPart = nil

--// Function to create Dash Part
local function createDashPart()
	if dashPart then dashPart:Destroy() end
	dashPart = Instance.new("Part")
	dashPart.Size = Vector3.new(2, 5, 2)
	dashPart.Anchored = true
	dashPart.CanCollide = false
	dashPart.Transparency = 0.3
	dashPart.Material = Enum.Material.Neon
	dashPart.Color = Color3.fromRGB(0, 255, 0)
	dashPart.Parent = workspace
	dashPart.Name = "DashPart"
end

--// Toggle button
toggle.MouseButton1Click:Connect(function()
	active = not active
	if active then
		toggle.Text = "Dash: ON"
		toggle.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
		createDashPart()
	else
		toggle.Text = "Dash: OFF"
		toggle.BackgroundColor3 = Color3.fromRGB(100, 0, 0)
		if dashPart then
			dashPart:Destroy()
			dashPart = nil
		end
	end
end)

--// Hide/Show UI with + and -
UIS.InputBegan:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.Equals then
		frame.Visible = true
	elseif input.KeyCode == Enum.KeyCode.Minus then
		frame.Visible = false
	end
end)

--// Update Dash Part position
RS.RenderStepped:Connect(function()
	if active and dashPart and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
		local hrp = player.Character.HumanoidRootPart
		dashPart.Position = hrp.Position + Vector3.new(0, 2.5, 0)
	end
end)

--// Dash movement when Shift pressed
UIS.InputBegan:Connect(function(input)
	if input.KeyCode == Enum.KeyCode.LeftShift and active and dashPart then
		local char = player.Character
		if char and char:FindFirstChild("HumanoidRootPart") then
			local speed = tonumber(speedBox.Text) or 50
			local dir = workspace.CurrentCamera.CFrame.LookVector
			dashPart.Anchored = false
			dashPart.Velocity = dir * speed
			wait(0.2)
			dashPart.Anchored = true
			dashPart.Velocity = Vector3.new(0, 0, 0)
		end
	end
end)
